(()=>{"use strict";const e=window.wp.blocks,t=window.wp.blockEditor,a=window.wp.components,l=window.wp.element,s=window.ReactJSXRuntime,i=[{label:"Twitter",value:"fab fa-twitter",pattern:"twitter.com|x.com"},{label:"Facebook",value:"fab fa-facebook-f",pattern:"facebook.com"},{label:"LinkedIn",value:"fab fa-linkedin-in",pattern:"linkedin.com"},{label:"Instagram",value:"fab fa-instagram",pattern:"instagram.com"},{label:"YouTube",value:"fab fa-youtube",pattern:"youtube.com"},{label:"GitHub",value:"fab fa-github",pattern:"github.com"},{label:"Website",value:"fas fa-globe",pattern:""},{label:"Email",value:"fas fa-envelope",pattern:"mailto:"}];(0,e.registerBlockType)("tmb/team-member",{title:"Team Member Profile",icon:"id-alt",category:"widgets",parent:["tmb/team-members"],attributes:{name:{type:"string",source:"html",selector:"h3.tmb-member-name",default:"Team Member Name"},title:{type:"string",source:"text",selector:".tmb-member-title",default:"Job Title"},imageUrl:{type:"string",default:""},imageId:{type:"number",default:0},imageAlt:{type:"string",default:""},bio:{type:"string",default:""},socialLinks:{type:"array",default:[]},textAlignment:{type:"string",default:"center"},layoutStyle:{type:"string",default:"card"},showBio:{type:"boolean",default:!1}},edit:({attributes:e,setAttributes:o})=>{const{name:n,title:r,imageUrl:m,imageId:c,imageAlt:b,bio:d,socialLinks:u,textAlignment:g,layoutStyle:p,showBio:h}=e,x=(0,t.useBlockProps)({className:`tmb-member tmb-member-${p} text-align-${g}`}),v=()=>{const e=[...u,{url:"",icon:"",label:"",service:"custom"}];o({socialLinks:e})},j=(e,t,a)=>{const l=[...u];if(l[e][t]=a,"url"===t&&a){const t=i.find(e=>a.includes(e.pattern)&&e.pattern);t&&(l[e].icon=t.value,l[e].service=t.label.toLowerCase())}o({socialLinks:l})},y=()=>{o({imageUrl:"",imageId:0,imageAlt:""})};return(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)(t.BlockControls,{children:(0,s.jsx)(t.AlignmentToolbar,{value:g,onChange:e=>o({textAlignment:e||"center"})})}),(0,s.jsxs)(t.InspectorControls,{children:[(0,s.jsxs)(a.PanelBody,{title:"Member Settings",initialOpen:!0,children:[(0,s.jsx)(a.SelectControl,{label:"Layout Style",value:p,options:[{label:"Card Style",value:"card"},{label:"Minimal Style",value:"minimal"}],onChange:e=>o({layoutStyle:e})}),(0,s.jsx)(a.ToggleControl,{label:"Show Biography",checked:h,onChange:e=>o({showBio:e})}),h&&(0,s.jsx)(a.BaseControl,{label:"Biography",children:(0,s.jsx)("textarea",{className:"components-textarea-control__input",value:d,onChange:e=>o({bio:e.target.value}),placeholder:"Enter member biography...",rows:"4"})})]}),(0,s.jsxs)(a.PanelBody,{title:"Social Links",initialOpen:!1,children:[(0,s.jsx)("p",{style:{fontSize:"12px",color:"#757575",marginBottom:"16px"},children:"Add social media links. URLs will auto-detect platforms when possible."}),(0,s.jsx)(a.Button,{onClick:v,isPrimary:!0,style:{marginBottom:"16px"},children:"+ Add Social Link"})]})]}),(0,s.jsxs)("div",{...x,children:[(0,s.jsx)("div",{className:"tmb-member-media",children:(0,s.jsx)(t.MediaUploadCheck,{children:(0,s.jsx)(t.MediaUpload,{onSelect:e=>{o({imageUrl:e.url,imageId:e.id,imageAlt:e.alt||""})},allowedTypes:["image"],value:c,render:({open:e})=>(0,s.jsx)("div",{className:"tmb-image-upload",children:m?(0,s.jsxs)("div",{className:"tmb-image-preview",children:[(0,s.jsx)("img",{src:m,alt:b,className:"tmb-member-image"}),(0,s.jsxs)("div",{className:"tmb-image-actions",children:[(0,s.jsx)(a.Button,{onClick:e,isSmall:!0,children:"Change"}),(0,s.jsx)(a.Button,{onClick:y,isSmall:!0,isDestructive:!0,children:"Remove"})]})]}):(0,s.jsx)(a.Button,{onClick:e,className:"tmb-upload-button",isPrimary:!0,children:"ðŸ“· Upload Profile Photo"})})})})}),(0,s.jsxs)("div",{className:"tmb-member-content",children:[(0,s.jsx)(t.RichText,{tagName:"h3",className:"tmb-member-name",value:n,onChange:e=>o({name:e}),placeholder:"Enter member name...",allowedFormats:[]}),(0,s.jsx)(t.RichText,{tagName:"div",className:"tmb-member-title",value:r,onChange:e=>o({title:e}),placeholder:"Enter job title...",allowedFormats:[]}),h&&(0,s.jsx)("div",{className:"tmb-member-bio",children:(0,s.jsx)("textarea",{className:"tmb-bio-textarea",value:d,onChange:e=>o({bio:e.target.value}),placeholder:"Enter biography...",rows:"3"})}),u.length>0&&(0,s.jsxs)("div",{className:"tmb-social-links-editor",children:[(0,s.jsx)("h5",{children:"Social Links"}),u.map((e,t)=>(0,s.jsxs)("div",{className:"tmb-social-link-item",children:[(0,s.jsxs)("div",{className:"tmb-social-link-header",children:[(0,s.jsx)(a.SelectControl,{label:"Social Platform",value:e.service||"custom",options:[{label:"Custom",value:"custom"},...i.map(e=>({label:e.label,value:e.label.toLowerCase()}))],onChange:e=>{const a=i.find(t=>t.label.toLowerCase()===e);a&&((e,t)=>{const a=[...u];a[e].icon=t.value,a[e].service=t.label.toLowerCase(),o({socialLinks:a})})(t,a)}}),(0,s.jsx)(a.Button,{isDestructive:!0,isSmall:!0,onClick:()=>(e=>{const t=u.filter((t,a)=>a!==e);o({socialLinks:t})})(t),label:"Remove link",children:"Ã—"})]}),(0,s.jsx)(a.TextControl,{label:"Icon Class (e.g., fab fa-twitter)",value:e.icon,onChange:e=>j(t,"icon",e),help:"Font Awesome classes work best"}),(0,s.jsx)(a.TextControl,{label:"Profile URL",type:"url",value:e.url,onChange:e=>j(t,"url",e),placeholder:"https://..."})]},t))]}),0===u.length&&(0,s.jsx)("div",{className:"tmb-no-social-links",children:(0,s.jsx)(a.Button,{onClick:v,isSecondary:!0,style:{marginTop:"10px"},children:"+ Add Social Links"})})]})]})]})},save:({attributes:e})=>{const{name:a,title:l,imageUrl:i,imageAlt:o,bio:n,socialLinks:r,textAlignment:m,layoutStyle:c,showBio:b}=e,d=t.useBlockProps.save({className:`tmb-member tmb-member-${c} text-align-${m}`});return(0,s.jsxs)("div",{...d,children:[i&&(0,s.jsx)("div",{className:"tmb-member-media",children:(0,s.jsx)("img",{src:i,alt:o||a,className:"tmb-member-image"})}),(0,s.jsxs)("div",{className:"tmb-member-content",children:[(0,s.jsx)(t.RichText.Content,{tagName:"h3",className:"tmb-member-name",value:a}),(0,s.jsx)(t.RichText.Content,{tagName:"div",className:"tmb-member-title",value:l}),b&&n&&(0,s.jsx)("div",{className:"tmb-member-bio",children:n}),r.length>0&&(0,s.jsx)("div",{className:"tmb-social-links",children:r.map((e,t)=>(0,s.jsx)("a",{href:e.url,className:`tmb-social-link tmb-social-${e.service||"custom"}`,target:"_blank",rel:"noopener noreferrer","aria-label":`Visit ${a}'s ${e.service||"social"} profile`,children:(0,s.jsx)("i",{className:e.icon})},t))})]})]})}}),(0,e.registerBlockType)("tmb/team-members",{title:"Team Members Grid",icon:"groups",category:"widgets",description:"A responsive grid container for team member profiles.",attributes:{columns:{type:"number",default:3},gap:{type:"number",default:20},layout:{type:"string",default:"grid"}},edit:({attributes:e,setAttributes:i})=>{const{columns:o,gap:n,layout:r}=e,m=(0,t.useBlockProps)({className:`tmb-members tmb-layout-${r}`,style:{gap:`${n}px`,gridTemplateColumns:"grid"===r?`repeat(${o}, 1fr)`:"none"}});return(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)(t.InspectorControls,{children:(0,s.jsxs)(a.PanelBody,{title:"Grid Settings",initialOpen:!0,children:[(0,s.jsx)(a.RangeControl,{label:"Columns",value:o,onChange:e=>i({columns:e}),min:1,max:6}),(0,s.jsx)(a.RangeControl,{label:"Gap (px)",value:n,onChange:e=>i({gap:e}),min:0,max:60,step:5}),(0,s.jsx)(a.SelectControl,{label:"Layout Type",value:r,options:[{label:"Grid",value:"grid"},{label:"Flexbox",value:"flex"}],onChange:e=>i({layout:e})})]})}),(0,s.jsx)("div",{...m,children:(0,s.jsx)(t.InnerBlocks,{allowedBlocks:["tmb/team-member"],orientation:"horizontal",template:[["tmb/team-member"],["tmb/team-member"],["tmb/team-member"]],templateLock:!1})})]})},save:({attributes:e})=>{const{columns:a,gap:l,layout:i}=e,o=t.useBlockProps.save({className:`tmb-members tmb-layout-${i}`,style:{gap:`${l}px`,gridTemplateColumns:"grid"===i?`repeat(${a}, 1fr)`:"none"}});return(0,s.jsx)("div",{...o,children:(0,s.jsx)(t.InnerBlocks.Content,{})})}})})();